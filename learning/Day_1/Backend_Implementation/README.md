# üéì Backend Implementation - –î–µ–Ω—å 1 –∑–∞–≤–µ—Ä—à—ë–Ω!

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

Backend Auth —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç! –í—Å–µ —Ñ–∞–π–ª—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ.

---

## üìÇ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### Backend Code (—Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏):

```
backend/src/modules/
‚îú‚îÄ‚îÄ users/schemas/
‚îÇ   ‚îî‚îÄ‚îÄ user.schema.ts              ‚Üê Mongoose —Å—Ö–µ–º–∞ User + enum UserStatus
‚îî‚îÄ‚îÄ auth/
    ‚îú‚îÄ‚îÄ dto/
    ‚îÇ   ‚îú‚îÄ‚îÄ register.dto.ts         ‚Üê DTO —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
    ‚îÇ   ‚îî‚îÄ‚îÄ login.dto.ts            ‚Üê DTO –≤—Ö–æ–¥–∞ (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
    ‚îú‚îÄ‚îÄ strategies/
    ‚îÇ   ‚îî‚îÄ‚îÄ jwt.strategy.ts         ‚Üê Passport JWT Strategy
    ‚îú‚îÄ‚îÄ guards/
    ‚îÇ   ‚îî‚îÄ‚îÄ jwt-auth.guard.ts       ‚Üê Guard –¥–ª—è –∑–∞—â–∏—Ç—ã routes
    ‚îú‚îÄ‚îÄ auth.service.ts             ‚Üê –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ (bcrypt, JWT)
    ‚îú‚îÄ‚îÄ auth.controller.ts          ‚Üê HTTP endpoints (API)
    ‚îî‚îÄ‚îÄ auth.module.ts              ‚Üê –ú–æ–¥—É–ª—å (DI, imports, providers)
```

### –û–±—É—á–∞—é—â–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:

```
learning/Day_1/Backend_Implementation/
‚îú‚îÄ‚îÄ 01_Architecture_Overview.md     ‚Üê –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
‚îú‚îÄ‚îÄ 02_API_Usage_Guide.md           ‚Üê –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API (–¥–ª—è Frontend)
‚îú‚îÄ‚îÄ 03_JWT_Explained.md             ‚Üê –ü–æ–¥—Ä–æ–±–Ω–æ –ø—Ä–æ JWT —Ç–æ–∫–µ–Ω—ã
‚îú‚îÄ‚îÄ 04_Testing_Guide.md             ‚Üê –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API
‚îú‚îÄ‚îÄ 05_Dependency_Injection.md      ‚Üê –ü–∞—Ç—Ç–µ—Ä–Ω DI –≤ NestJS
‚îú‚îÄ‚îÄ 06_DTO_Pattern.md               ‚Üê –ü–∞—Ç—Ç–µ—Ä–Ω DTO –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
‚îî‚îÄ‚îÄ README.md                       ‚Üê –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

---

## üéØ API Endpoints

### POST /auth/register
–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **Body**: `{ name, email, password }`
- **Response**: `{ access_token, user }`

### POST /auth/login
–í—Ö–æ–¥ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **Body**: `{ email, password }`
- **Response**: `{ access_token, user }`

### GET /auth/profile
–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å (—Ç—Ä–µ–±—É–µ—Ç JWT —Ç–æ–∫–µ–Ω)
- **Headers**: `Authorization: Bearer <token>`
- **Response**: `{ _id, name, email, avatar, status, createdAt, updatedAt }`

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

### ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:

1. **Layered Architecture**
   - Controller Layer ‚Üí Service Layer ‚Üí Data Layer
   - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏

2. **Dependency Injection (DI)**
   - –°–ª–∞–±–∞—è —Å–≤—è–∑—å –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
   - –õ–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å

3. **DTO Pattern**
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥—è—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö
   - –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

4. **Strategy Pattern**
   - JWT Strategy –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
   - –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (OAuth, Local)

5. **Guard Pattern**
   - –î–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–∞—è –∑–∞—â–∏—Ç–∞ routes
   - –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π JwtAuthGuard

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:

1. **Bcrypt** - —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
   - –°–æ–ª—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
   - Salt rounds: 10
   - –ü–∞—Ä–æ–ª–∏ –ù–ï —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ plain text

2. **JWT —Ç–æ–∫–µ–Ω—ã**
   - –ü–æ–¥–ø–∏—Å—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–º –∫–ª—é—á–æ–º
   - –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: 7 –¥–Ω–µ–π
   - –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–¥–¥–µ–ª–∞—Ç—å –±–µ–∑ –∫–ª—é—á–∞

3. **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**
   - class-validator –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä—ã
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
   - –ó–∞—â–∏—Ç–∞ –æ—Ç SQL/NoSQL injection

4. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
   - –ü—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –≤ –ë–î
   - –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–¥–∞–ª—ë–Ω ‚Üí —Ç–æ–∫–µ–Ω –Ω–µ–≤–∞–ª–∏–¥–µ–Ω

---

## üìñ –° —á–µ–≥–æ –Ω–∞—á–∞—Ç—å –∏–∑—É—á–µ–Ω–∏–µ

### –î–ª—è Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫):

1. **[02_API_Usage_Guide.md](./02_API_Usage_Guide.md)**
   - –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å API –∏–∑ Frontend
   - –ü—Ä–∏–º–µ—Ä—ã —Å Fetch –∏ Nuxt 3
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Pinia Store

2. **[03_JWT_Explained.md](./03_JWT_Explained.md)**
   - –ß—Ç–æ —Ç–∞–∫–æ–µ JWT —Ç–æ–∫–µ–Ω—ã
   - –ö–∞–∫ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
   - –ì–¥–µ —Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω

3. **[04_Testing_Guide.md](./04_Testing_Guide.md)**
   - –ö–∞–∫ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API
   - –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ cURL
   - Thunder Client / Postman

4. **[01_Architecture_Overview.md](./01_Architecture_Overview.md)** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Backend
   - –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã
   - –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

### –ï—Å–ª–∏ –∏–Ω—Ç–µ—Ä–µ—Å–µ–Ω Backend (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

5. **[05_Dependency_Injection.md](./05_Dependency_Injection.md)**
   - –ü–∞—Ç—Ç–µ—Ä–Ω DI –≤ NestJS
   - –ó–∞—á–µ–º –Ω—É–∂–µ–Ω
   - –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

6. **[06_DTO_Pattern.md](./06_DTO_Pattern.md)**
   - –ü–∞—Ç—Ç–µ—Ä–Ω DTO
   - –í–∞–ª–∏–¥–∞—Ü–∏—è —Å class-validator
   - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ DTO

7. **–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥** (—Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏)
   - `backend/src/modules/auth/` - –≤—Å–µ —Ñ–∞–π–ª—ã Auth –º–æ–¥—É–ª—è
   - –ö–∞–∂–¥—ã–π —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

---

## üß™ –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Backend —Ä–∞–±–æ—Ç–∞–µ—Ç:

```bash
# 1. –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
curl -X POST http://localhost:3001/auth/register \
  -H "Content-Type: application/json" \
  -d '{"name":"Test","email":"test@example.com","password":"test123"}'

# 2. –í—Ö–æ–¥ (–¥–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å access_token)
curl -X POST http://localhost:3001/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"test123"}'

# 3. –ü—Ä–æ—Ñ–∏–ª—å (–∑–∞–º–µ–Ω–∏—Ç–µ YOUR_TOKEN)
curl -X GET http://localhost:3001/auth/profile \
  -H "Authorization: Bearer YOUR_TOKEN"
```

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [04_Testing_Guide.md](./04_Testing_Guide.md)

---

## üìä –ß—Ç–æ –¥–∞–ª—å—à–µ

### –î–µ–Ω—å 2 (–±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ):

1. **Refresh Tokens**
   - –ö–æ—Ä–æ—Ç–∫–∏–π access token (15 –º–∏–Ω—É—Ç)
   - –î–ª–∏–Ω–Ω—ã–π refresh token (7 –¥–Ω–µ–π)
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

2. **httpOnly Cookies**
   - –ë–æ–ª–µ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
   - –ó–∞—â–∏—Ç–∞ –æ—Ç XSS –∞—Ç–∞–∫

3. **UsersModule**
   - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –ó–∞–≥—Ä—É–∑–∫–∞ –∞–≤–∞—Ç–∞—Ä–∞
   - –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞

### –í–∞—à —Å–ª–µ–¥—É—é—â–∏–π —à–∞–≥ (Frontend):

**–ù–∞—á–Ω–∏—Ç–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É Frontend!** üé®

1. –ò–∑—É—á–∏—Ç–µ [02_API_Usage_Guide.md](./02_API_Usage_Guide.md)
2. –°–æ–∑–¥–∞–π—Ç–µ Auth Store (Pinia)
3. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Login/Register
4. –ò–Ω—Ç–µ–≥—Ä–∏—Ä—É–π—Ç–µ —Å Backend API

---

## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Backend:
```bash
docker-compose restart backend
```

### –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ Backend:
```bash
docker-compose logs -f backend
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å:
```bash
docker-compose ps
```

### –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ MongoDB:
```bash
docker-compose exec mongodb mongosh -u admin -p password123
use icore
db.users.find().pretty()
```

---

## üéì –ò–∑—É—á–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

- ‚úÖ NestJS –º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- ‚úÖ Mongoose —Å—Ö–µ–º—ã –∏ –º–æ–¥–µ–ª–∏
- ‚úÖ DTO –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è (class-validator)
- ‚úÖ Bcrypt —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ JWT —Ç–æ–∫–µ–Ω—ã –∏ Passport.js
- ‚úÖ Guards –∏ –∑–∞—â–∏—Ç–∞ routes
- ‚úÖ Dependency Injection
- ‚úÖ REST API best practices
- ‚úÖ Error handling
- ‚úÖ TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### NestJS:
- [–û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](https://docs.nestjs.com/)
- [NestJS Modules](https://docs.nestjs.com/modules)
- [NestJS Guards](https://docs.nestjs.com/guards)

### JWT:
- [JWT.io](https://jwt.io/) - –¥–µ–∫–æ–¥–µ—Ä —Ç–æ–∫–µ–Ω–æ–≤
- [Passport JWT](http://www.passportjs.org/packages/passport-jwt/)

### –í–∞–ª–∏–¥–∞—Ü–∏—è:
- [class-validator](https://github.com/typestack/class-validator)
- [class-transformer](https://github.com/typestack/class-transformer)

---

## ‚ú® –ü–æ–∑–¥—Ä–∞–≤–ª—è—é!

**Backend Auth —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞!** –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ **Frontend —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ** - –≤–∞—à–µ–º –ø—Ä–æ—Ñ–∏–ª–µ! üéâ

–í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –æ–±—É—á–∞—é—â–∏—Ö —Ñ–∞–π–ª–∞—Ö. –í—ã –º–æ–∂–µ—Ç–µ –∏–∑—É—á–∏—Ç—å –∏—Ö –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Backend.

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥**: –ù–∞—á–Ω–∏—Ç–µ Day 1 Frontend - —Å–æ–∑–¥–∞–Ω–∏–µ Login/Register —Å—Ç—Ä–∞–Ω–∏—Ü! üöÄ
